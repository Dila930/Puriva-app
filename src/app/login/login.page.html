<ion-content class="puriva-login-page">
  <div class="puriva-login-container">
    <div class="puriva-login-card">
      <div class="puriva-login-header">
        <div class="puriva-logo-section">
          <div class="puriva-logo">PURIVA</div>
          <div class="puriva-logo-subtitle">Smart UV Chamber untuk Program Makan Gratis</div>
        </div>
        <div class="puriva-welcome-text">Selamat Datang</div>
        <div class="puriva-welcome-subtitle">Silakan masuk ke akun Anda</div>
      </div>

      <!-- Email-only login -->
      <ng-container>
        <form #emailForm="ngForm" class="puriva-form-section animated fadeIn" (ngSubmit)="handleEmailLogin()">
          <ion-list lines="none" class="ion-no-margin">
            <ion-item class="puriva-form-item">
              <ion-label position="stacked">Email Address</ion-label>
              <ion-input
                type="email"
                placeholder="user@example.com"
                [(ngModel)]="email"
                name="email"
                class="puriva-ionic-input"
                required
                email
              ></ion-input>
              <ion-icon name="mail-outline" slot="start" class="puriva-input-icon"></ion-icon>
            </ion-item>

            <ion-item class="puriva-form-item">
              <ion-label position="stacked">Password</ion-label>
              <ion-input
                type="password"
                placeholder="Masukkan password Anda"
                [(ngModel)]="password"
                name="password"
                class="puriva-ionic-input"
                required
              ></ion-input>
              <ion-icon name="lock-closed-outline" slot="start" class="puriva-input-icon"></ion-icon>
            </ion-item>
          </ion-list>

          <ion-button
            expand="block"
            class="puriva-btn-primary"
            [disabled]="!email || !password || isLoading"
            type="submit"
          >
            <div *ngIf="isLoading" class="puriva-loading-spinner"></div>
            <ion-icon *ngIf="!isLoading" name="log-in-outline"></ion-icon>
            <ion-label>Masuk</ion-label>
          </ion-button>

          <div class="puriva-forgot-section">
            <a
              class="puriva-forgot-link"
              href="mailto:purivaakun@gmail.com?subject=Bantuan%20Reset%20Kode%20Akses%20Puriva&body=Halo%20Tim%20CS%20Puriva,%0D%0A%0D%0ASaya%20ingin%20meminta%20bantuan%20reset%20kode%20akses%20(password)%20akun%20Puriva.%0D%0A%0D%0AData%20saya:%0D%0A-%20Email:%20...%0D%0A-%20Username:%20...%0D%0A-%20Tanggal%20registrasi%20(jika%20masih%20ingat):%20...%0D%0A%0D%0ATerima%20kasih."
              aria-label="Lupa Password"
            >
              <ion-button size="small" fill="clear">Lupa Password</ion-button>
            </a>
          </div>

          <div class="puriva-register-section">
            <span>Belum punya akun? </span>
            <a (click)="goToRegister()" class="puriva-register-link">Daftar di sini</a>
          </div>
        </form>
      </ng-container>
    </div>
  </div>
</ion-content>